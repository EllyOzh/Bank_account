# Проект **Widget банковских операций**

## Описание:

В проекте реализована бэкенд-часть виджета банковских операций клиента.
Созданы функции, которые сортируют операции клиента по различным параметрам.
Проект реализован на Python с использованием менеджера зависимостей Poetry.
В структуру проекта добавлены следующие модули:

## Установка
Для установки зависимостей используйте Poetry.

1. Убедитесь, что у вас установлен Python 3.8 или выше.
2. Установите Poetry, если он еще не установлен:
pip install poetry
3. Клонируйте репозиторий:
git clone https://github.com/EllyOzh/Bank_account
4. Установите зависимости:
poetry install
5. Активируйте виртуальное окружение:
poetry shell

## Функциональноcть проекта 

### Модуль Search_transactions

В этом модуле реализованы две функции:

1. Функция *search_transactions_by_description(transactions, search_words)*:
принимает список словарей с данными о банковских операциях и строку поиска,
а возвращает список словарей, у которых в описании есть данная строка.

2. Функция *count_transactions_by_categories(transactions, categories)*:
считает количество операций в определенных категориях.
Принимает список словарей с данными о банковских операциях и список возможных категорий операций.
Возвращает словарь, в котором ключ - это категория, а значение - количество операций в этой категории.

### Модуль Csv_excel_reader

Этот модуль включает две основные функции для чтения данных из файлов разных форматов:

1. Чтение CSV файлов *csv_read(file_path)*:
Функция csv_read предназначена для чтения финансовых операций из CSV файлов. 
Она принимает путь к файлу и возвращает список словарей, 
где каждый словарь представляет собой одну финансовую операцию.

2. Чтение Excel файлов *excel_read(path_to_file_excel)*:
Функция excel_read предназначена для чтения данных из Excel файлов (.xlsx). 
Она также возвращает список словарей, где каждый словарь представляет собой одну финансовую операцию.

### Модуль Utils

Этот модуль содержит функцию *reading_json(path)* для работы с JSON-файлами, 
включая чтение данных о финансовых транзакциях.

### Модуль External_api

Этот модуль содержит функции:
- *convert_currency(amount, from_currency,to_currency)*,
которая конвертирует валюту с использованием внешнего API;
- *transaction_amount(transaction)*, которая выводит данные о сумме транзакции.

### Модуль Generators

Модуль Generators предоставляет функции для работы с массивами транзакций. 
Он включает в себя следующие функции:

- *filter_by_currency(transactions, currency)*:  
фильтрует транзакции по заданной валюте и возвращает итератор.

- *transaction_descriptions(transactions)*:
генератор, возвращающий описания транзакций.

- *card_number_generator(low_limit, upper_limit)*:
генератор, который выводит номера банковских карт в виде ХХХХ ХХХХ ХХХХ ХХХХ.

### Модуль Decorators

Декоратор log предназначен для автоматического логирования начала и окончания выполнения функций, а также их результатов или возникающих ошибок. Декоратор может записывать логи в файл или выводить их в консоль в зависимости от переданного аргумента filename.

#### Особенности
Поддерживает логирование успешных операций с результатами выполнения функций.
Логирует ошибки с указанием типа ошибки и входных параметров.
Гибко настраивается для записи логов в файл или вывода в консоль.
#### Установка
Для использования декоратора log, скопируйте файл decorators.py в ваш проект и импортируйте декоратор:

*from decorators import log*

#### Использование
Для применения декоратора к функции, просто укажите его перед определением функции:

**@log(filename="example.log")
def my_function(arg1, arg2):
    return arg1 + arg2**

Если аргумент filename не указан, логи будут выводиться в консоль.

### Функция main
Функция main отвечает за основную логику проекта и связывает функциональности между собой.

### Тестирование

В проекте используется pytest для написания и запуска тестов.

Для запуска тестов выполните команду:

*pytest test_decorators.py*

Тесты к модулям проекта расположены в директории tests.

#### Запуск тестов

Для запуска всех тестов выполните следующую команду:

pytest

#### Покрытие кода тестами
Для проверки покрытия кода тестами можно использовать pytest-cov:

**pytest --cov=src**

Где src — папка с исходным кодом.

Для генерации HTML-отчёта о покрытии выполните:

**pytest --cov=src --cov-report=html**

### Лицензия
Этот проект распространяется под лицензией MIT. Подробнее см. в файле LICENSE.

### Настройка файла .env 

Для работы с внешними API необходимо создать файл ".env" в корне проекта и 
добавить в него следующие переменные окружения:

API_KEY=ваш_ключ_доступа
API_URL=https://api.example.com

Убедитесь, что файл ".env" добавлен в ".gitignore", 
чтобы избежать случайного попадания конфиденциальной информации в репозиторий.
